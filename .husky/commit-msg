#!/bin/sh

# Enforce conventional commits format
# Format: type(scope): subject
# Types: feat, fix, docs, style, refactor, perf, test, chore, ci, revert

COMMIT_MSG=$(head -n 1 "$1")
COMMIT_PATTERN="^(feat|fix|docs|style|refactor|perf|test|chore|ci|revert)(\(.+\))?!?: .{1,}"

if ! echo "$COMMIT_MSG" | grep -qE "$COMMIT_PATTERN"; then
  echo "❌ Commit message does not follow Conventional Commits format!"
  echo ""
  echo "Format: type(scope): subject"
  echo ""
  echo "Examples:"
  echo "  feat(api): add user authentication"
  echo "  fix(web): resolve button styling issue"
  echo "  docs: update README with setup instructions"
  echo ""
  echo "Types: feat, fix, docs, style, refactor, perf, test, chore, ci, revert"
  exit 1
fi

echo "✅ Commit message format is valid!"
