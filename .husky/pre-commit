# Add pnpm to PATH if it exists
export PNPM_HOME="/home/vscode/.local/share/pnpm"
[ -d "$PNPM_HOME" ] && export PATH="$PNPM_HOME:$PATH"

# Run lint-staged on staged files
if command -v pnpm >/dev/null 2>&1; then
  pnpm lint-staged
elif command -v npx >/dev/null 2>&1; then
  npx lint-staged
else
  npm run lint-staged
fi

# Exit with error if lint-staged fails
if [ $? -ne 0 ]; then
  echo "❌ Lint-staged checks failed. Commit aborted."
  exit 1
fi

echo "✅ Pre-commit checks passed!"
